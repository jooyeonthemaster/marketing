# 🗺️ 네이버 지도 플레이스 순위 크롤러

2024-2025년 최신 스텔스 기법을 적용한 네이버 지도 크롤링 프로그램입니다.

## ✨ 주요 기능

- 🔍 **키워드 기반 검색**: 원하는 키워드로 네이버 지도에서 장소 정보 수집
- 🥷 **스텔스 크롤링**: Undetected-Playwright를 사용한 안티봇 시스템 우회
- 📊 **다양한 형식 지원**: Excel, CSV, JSON 형식으로 데이터 저장
- 🎯 **순위별 정리**: 검색 순위에 따른 체계적인 데이터 수집
- 🛡️ **안정성**: 에러 핸들링 및 재시도 메커니즘
- 🎮 **사용자 친화적**: 대화형 모드 및 명령행 인터페이스 지원

## 🚀 설치 및 실행

### 1. 환경 설정

```bash
# 1. 저장소 클론 (또는 프로젝트 디렉토리로 이동)
cd marketing3

# 2. Python 가상환경 생성
python -m venv venv

# 3. 가상환경 활성화 (Windows)
.\venv\Scripts\Activate.ps1

# 4. 필요한 패키지 설치
pip install -r requirements.txt

# 5. Playwright 브라우저 설치
playwright install
```

### 2. 실행 방법

#### 기본 실행
```bash
python src/main.py
```

#### 대화형 모드
```bash
python src/main.py -i
```

#### 사용자 정의 키워드
```bash
python src/main.py -k "강남 맛집,홍대 카페,명동 쇼핑"
```

## 📁 프로젝트 구조

```
marketing3/
├── venv/                           # Python 가상환경
├── src/                           # 소스 코드
│   ├── main.py                    # 메인 실행 파일
│   ├── crawler/                   # 크롤링 모듈
│   │   ├── __init__.py
│   │   ├── naver_map_crawler.py   # 네이버 지도 크롤러
│   │   └── stealth_utils.py       # 스텔스 유틸리티
│   ├── data/                      # 데이터 모듈
│   │   └── __init__.py
│   └── utils/                     # 유틸리티 모듈
│       ├── __init__.py
│       └── data_processor.py      # 데이터 처리기
├── output/                        # 결과 파일 저장소
├── config/                        # 설정 파일
│   └── settings.py               # 프로젝트 설정
├── requirements.txt              # Python 패키지 목록
└── README.md                     # 프로젝트 문서
```

## ⚙️ 설정 옵션

`config/settings.py` 파일에서 다음 설정을 변경할 수 있습니다:

- **브라우저 설정**: headless 모드, 뷰포트 크기, 타임아웃 등
- **크롤링 설정**: 요청 간 지연 시간, 재시도 횟수, 수집 장소 수 등
- **검색 키워드**: 기본 검색할 키워드 목록
- **출력 설정**: 파일명, 저장 경로 등

## 📊 수집 데이터

각 장소에 대해 다음 정보를 수집합니다:

- **순위**: 검색 결과 내 순위
- **장소명**: 업체/장소 이름
- **주소**: 상세 주소
- **카테고리**: 업종 분류
- **평점**: 네이버 평점
- **리뷰 수**: 리뷰 개수
- **검색 키워드**: 사용된 검색어
- **수집 시간**: 크롤링 실행 시간

## 🛡️ 스텔스 기능

이 프로그램은 다음과 같은 안티탐지 기법을 사용합니다:

1. **Undetected-Playwright**: 자동화 탐지 우회
2. **동적 사용자 에이전트**: 랜덤 브라우저 정보
3. **인간적 행동 시뮬레이션**: 마우스 움직임, 스크롤, 타이핑 지연
4. **브라우저 설정 조작**: WebDriver 속성 제거, 플러그인 정보 조작
5. **요청 간 지연**: 과도한 요청 방지

## 📝 사용 예시

### 1. 기본 키워드로 실행
```python
# config/settings.py에 정의된 기본 키워드 사용
python src/main.py
```

### 2. 특정 지역 맛집 검색
```python
python src/main.py -k "강남역 맛집,홍대입구 맛집,명동 맛집"
```

### 3. 업종별 검색
```python
python src/main.py -k "카페,치킨,족발,일식"
```

## 📈 결과 파일

크롤링 완료 후 `output/` 디렉토리에 다음 파일들이 생성됩니다:

- **Excel 파일** (`.xlsx`): 키워드별 시트, 요약 통계 포함
- **CSV 파일** (`.csv`): 전체 데이터 테이블 형식
- **JSON 파일** (`.json`): 원본 데이터 및 메타데이터
- **로그 파일** (`crawler.log`): 실행 로그

## ⚠️ 주의사항

1. **합법적 사용**: 개인적, 교육적 목적으로만 사용하세요
2. **서버 부하**: 과도한 요청으로 서버에 부하를 주지 마세요
3. **이용약관**: 네이버 이용약관을 준수하세요
4. **데이터 활용**: 수집된 데이터는 저작권을 존중하여 사용하세요

## 🔧 문제 해결

### 크롤링이 차단되는 경우
- `config/settings.py`에서 `delay_between_requests` 값을 증가시키세요
- `headless` 모드를 `False`로 설정하여 브라우저 동작을 확인하세요

### 데이터가 수집되지 않는 경우
- 네이버 지도 HTML 구조가 변경되었을 수 있습니다
- `src/crawler/naver_map_crawler.py`의 선택자를 업데이트하세요

### 브라우저 실행 오류
```bash
# Playwright 브라우저 재설치
playwright install chromium
```

## 🛠️ 기술 스택

- **Python 3.13+**: 메인 프로그래밍 언어
- **Playwright**: 웹 자동화 및 크롤링
- **Undetected-Playwright**: 탐지 우회
- **Pandas**: 데이터 처리 및 분석
- **BeautifulSoup**: HTML 파싱
- **Fake-UserAgent**: 동적 사용자 에이전트

## 📄 라이선스

이 프로젝트는 교육 및 연구 목적으로 제작되었습니다. 상업적 사용 시 관련 법규를 확인하시기 바랍니다.

## 👨‍💻 개발자

- **개발 기간**: 2024-2025
- **최신 업데이트**: 네이버 지도 2024-2025년 구조 반영
- **스텔스 기법**: 최신 안티봇 시스템 우회 기법 적용

---

🎉 **네이버 지도 크롤링을 시작해보세요!** 